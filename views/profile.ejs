<%- include('./partials/head.ejs') %>
<%- include('./partials/navigation.ejs') %>
<%- include('./partials/flash.ejs') %>
<main id="main-content" class="profile-main">
    <div class="container">
        <article class="card-panel z-depth-2">
            <header>
                <h1 class="center-align flow-text">Profile Information</h1>
            </header>
            <figure class="profile-avatar center-align">
                <img id="profile-picture" src="<%= user.image || 'https://placeholder.pics/svg/100x100' %>" class="responsive-img circle z-depth-1" alt="Profile picture of <%= user.displayName %>">
            </figure>         
            <section class="center-align margin" aria-labelledby="upload-heading">
                <h2 id="upload-heading" class="sr-only">Update Profile Picture</h2>
                <form id="profile-pic-form" action="/profile" method="POST" enctype="multipart/form-data">
                    <div class="file-field input-field">
                        <label for="profile-file" class="btn blue-grey waves-effect waves-light hoverable"><span>Choose profile picture</span></label>
                            <input id="profile-file" type="file" name="file" accept="image/*" aria-describedby="file-help" required>
                            <span id="file-help" class="sr-only">Upload a profile picture (JPG or PNG)</span>
                    </div>
                    <button type="submit" class="btn blue-grey waves-effect waves-light hoverable">
                        <span id="upload-btn-text">Upload Picture</span>
                    </button>
                </form>
            </section>
            <section class="profile-info-section center-align margin" aria-labelledby="profile-details-heading">
                <h2 id="profile-details-heading" class="sr-only">Profile Details</h2>
                <dl class="profile-info-card">
                    <div class="profile-info-item">
                        <dt class="bold">Name:</dt>
                        <dd><%= user.displayName %></dd>
                    </div>
                    <div class="profile-info-item">
                        <dt class="bold">Email:</dt>
                        <dd><%= user.email || 'No email provided' %></dd>
                    </div>
                </dl>
                
                <div class="profile-actions" role="group" aria-label="Profile actions">
                    <a href="/profile/edit" class="btn blue-grey waves-effect waves-light hoverable"><i class="fas fa-edit left" aria-hidden="true"></i> Settings</a>
                </div>
            </section>
        </article>
    </div>
</main>
<%- include('./partials/footer.ejs') %>